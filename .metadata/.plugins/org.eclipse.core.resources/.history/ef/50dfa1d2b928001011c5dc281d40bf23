package Maze;

import java.util.*;
import java.util.stream.Collectors;

public class Player extends Entity {	
	public static final String[] Type = {"ğŸ‘©","ğŸ§”","ğŸ…","ğŸ‘¸"}; //í”Œë ˆì´ì–´ ì•„ì´ì½˜ ì¢…ë¥˜
	private LinkedList<Item>  ArmourEquit; //ì¥ì°© ì¤‘ì¸ ë°©ì–´êµ¬
	private LinkedList<Item> Bag; //ê°€ë°©
	private LinkedList<Item> WeaponEquit; //ì¥ë¹„ì¥ì°© ì—¬ë¶€
	private int stage;
	public Player(String Name, int typeNum) {
		super(100, Type[typeNum], Name);
		ArmourEquit = new LinkedList<Item>();
		Bag = new LinkedList<Item>(); 
		WeaponEquit = new LinkedList<Item>(); 
		setAttack((int)(Math.random()*18)+3); //3~20ì‚¬ì´ë¡œ ê³µê²©ë ¥ì„ ì„¤ì • 
	
	}
	public LinkedList<Item> getArmour() {
		return ArmourEquit;
		
	}
	public LinkedList<Item> getWeapon() {
		return WeaponEquit;
		
	}
	public LinkedList<Item> getBag() {
		return Bag;
		
	}
	
	public void pickItem(Item item) { //ì•„ì´í…œ ì¤ê¸°
		Bag.add(item);
	}
	
	public void releaseItem(Item item) { //ì¥ë¹„í•´ì œ
		if(item.getType().equals("Armour")) {
			
			ArmourEquit.remove(item);
			System.out.println(item.getName()+" ì¥ë¹„í•´ì œ");
			setAValue(-item.getEffect());
			System.out.println("í˜„ì¬ ë°©ì–´ë ¥ : "+getAValue());
			
		}
		else if(item.getType().equals("Weapon")) {
			WeaponEquit.remove(item);
			System.out.println(item.getName()+" ì¥ë¹„í•´ì œ");
			System.out.println("í˜„ì¬ ê³µê²©ë ¥ : "+getAttack()+"(+"+getEValue(WeaponEquit)+")");
		}
		else if(item.getType().equals("Potion")) {
			
		}
	}
	
	public void EquitItem(Item item) {   //ì•„ì´í…œ ì¥ì°©
		if(item.getType().equals("Armour")) {
			if(ArmourEquit.size() >= 4) {
				System.out.println("ë” ì´ìƒ ì¥ë¹„í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
				return;
			}
			ArmourEquit.add(item);
			System.out.println(item.getName()+" ì¥ë¹„ì™„ë£Œ");
			setAValue(item.getEffect());
			System.out.println("í˜„ì¬ ë°©ì–´ë ¥ : "+getAValue());
			
		}
		else if(item.getType().equals("Weapon")) {
			if(WeaponEquit.size() >= 2) {
				System.out.println("ë” ì´ìƒ ì¥ë¹„í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
				return;
			}
			WeaponEquit.add(item);
			System.out.println(item.getName()+" ì¥ë¹„ì™„ë£Œ");
			System.out.println("í˜„ì¬ ê³µê²©ë ¥ : "+getAttack()+"(+"+getEValue(WeaponEquit)+")");
		}
	}
	
	public int getEValue(LinkedList<Item> list) { //í˜„ì¬ ì¥ë¹„í•œ ë¬´ê¸° ê³µê²©ë ¥ ë˜ëŠ” ë°©ì–´ë ¥
		
		return list.stream().mapToInt(Item::getEffect).sum();
		
	}
	
	

	
	
	@Override
	public void Attack(Entity e) {
		
		e.MinusHp(getAttack()+getEValue(WeaponEquit));
		
	}

	@Override
	public void getStatus() {
		super.getStatus();
		System.out.println("í˜„ì¬ ê³µê²©ë ¥ : "+getAttack()+"(+"+getEValue(WeaponEquit)+")");
		System.out.println("í˜„ì¬ ë°©ì–´ë ¥ : "+getEValue(ArmourEquit));
		System.out.println("í˜„ì¬ ì¥ë¹„ì¤‘ì¸ ë¬´ê¸° : "+WeaponEquit.stream().map(Item::getName).collect(Collectors.joining(" ")));
		System.out.println("í˜„ì¬ ì¥ë¹„ì¤‘ì¸ ë°©ì–´êµ¬ : "+ArmourEquit.stream().map(Item::getName).
				collect(Collectors.joining(" ")));
		
	}
	

	
}
