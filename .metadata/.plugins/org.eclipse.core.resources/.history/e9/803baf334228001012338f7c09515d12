package Maze;

public class MapNode {
	private int stage;
	private boolean goal;
	private MapNode Left,Mid,Right;
	public boolean L,M,R;
	public boolean getGoal() {return goal;}
	public MapNode(int stage) {
		this.stage = stage;
		L = ((int)(Math.random()*3) == 0);
		M = ((int)(Math.random()*3) == 0);
		R = ((int)(Math.random()*3) == 0);
		if(!L&&!M&&!R) {
			switch((int)(Math.random()*3)) {
			case 0 -> L = true;
			case 1 -> M = true;
			case 2 -> R = true;
			}
		}
	}
	public void move() {
		if(stage > 50 && (int)(Math.random()*10) < 5) {
			goal = true;
		}
		else if(stage ==55) {
			goal = true;
		}
		else goal = false;
		if(!goal) {
			if((int)(Math.random()*3) == 0) {
				Left = new MapNode(++stage);
			}
			else Left = null;
			if((int)(Math.random()*3) == 0) {
				Mid = new MapNode(++stage);
			}
			else Mid = null;
			if((int)(Math.random()*3) == 0) {
				Right = new MapNode(++stage);
			}
			else Right = null;
			if(Left == null && Mid == null && Right == null) {
				switch((int)(Math.random()*3)) {
				case 0 -> Left = new MapNode(++stage);
				case 1 -> Mid = new MapNode(++stage);
				case 2 -> Right = new MapNode(++stage);
				}
			}
		}
	}
	public MapNode getMap(int n) { //0은 left, 1은 mid 2는 right
		return switch(n) {
		case 0 -> Left;
		case 1 -> Mid;
		case 2 -> Right;
		default -> null;
		};
		
	}
	public int getStage()
	{
		return stage;
	}
}
